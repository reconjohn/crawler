# crawler

Yohan Min, min25@uw.edu

**Keywords:** energy justice


Focal issue: energy justice (uneven distribution of clean energy technologies)

The recent global climate change has led to the development of various clean energy policies and technologies. Clean energy technologies such as rooftop solar and electric vehicles are proven to increase resilience in response to the impacts of climate change in addition to economic, health, and environmental benefits. However, social equity issues have emerged with the current rapid transition of energy systems toward clean energy technologies, represented by inequitable societal transformation with undesirable burdens such as increased electric bills and imposed regressive taxation, especially on vulnerable or underserved communities.

The Clean Energy Transformation Act (CETA) was signed into law by the Governor of Washington in 2019 to remove greenhouse gas emissions from electricity supplies by 2045. It plans to eliminate coal power plants by 2025; at least 80% of electricity should be renewable or non-emitting, while up to 20% could be an alternative compliance option. Finally, 100% of electricity should be renewable or non-emitting by 2045. Furthermore, RCW 19.405.120 focuses on low-income energy assistance by requiring utilities in Washington to provide energy assistance funding and programs to low-income households from July 2021. RCW 19.405 aims at the equitable distribution of benefits. The purpose of energy assistance is to reduce utility customers' energy burden for weatherization and ownership in distributed energy resources (RCW 19.405.020(15)).

Government policies including regulations and financial supports such as grants, incentives, and tax credits are important to increase adoption of clean energy technologies and could be barriers if not well designed. This is because such policies affect the electricity markets in addition to how fast the distributed energy resources spread and how those transitions affect utilities in revenue. As a result, many states are working on reviews of rate designs such as modifying credit rates for the surplus electricity back to the grid, increasing fixed charges, adding demand charges, and allowing shared solar programs.

















Driving force 1: the built environment and demography

The built environment and demographic characteristics are significantly related to the distribution of clean energy technologies. For example, income and homeownership (Keirstead, 2007), education (Davidson et al., 2014), race and ethnicity (Sunter et al., 2019), homeownership and neighborhood effects (Hofierka et al., 2014); owner-occupation, single-family versus multifamily development, suburban and rural location, and preexisting rooftop solar installations (Graziano and Gillingham, 2015), population density, and single-family home (Muller and Rode, 2013).

Homeownership, income, and single-family housing zone will be the dimensions of the 1st driving force. Higher homeownership, income, and single-family housing rates will expedite the diffusion or adoption of clean energy technologies because adoption of the technologies requires homeownership and financial capacity to bear the upfront costs to install the technologies. Furthermore, a single-family housing structure is desirable to adopt technologies such as rooftop solar and electric vehicle chargers. In this regard, a higher rate of homeownership, income, and single-family housings is at the one end, and the lower rate of those is at the other end.

-   Current status of key dimensions
Homeownership, income, and single-family housing zone are positively correlated with each other and the adoption of clean energy technologies in Seattle.

-   Past trends of key dimensions.
Due to the historical redlining and segregation policies, the trend of the built environment and demographic characteristics seems clustered with similar characteristics. That means homeownership, income, and single-family housing zone were positively correlated with each other.

-   Future trends
Governments have worked on the equity issues in energy and housing. Depending on the successful policy implementation, the correlation among the characteristics will change.

Interdependencies
The dimensions of driving force are interdependent with each other. Homeownership, income, and single-family housing zone are positively correlated with each other and the adoption of clean energy technologies.

Future uncertainty
Energy and urban policies, and urban development, which leads to economic development and job creation will decide the degree of the driving force to energy justice as they are shaping the built environment and demographic characteristics.




Driving force 2: energy and urban policies, and available technologies

Available technologies coupled with policies are significant to energy justice. For example, states with net energy metering (NEM) have higher adoption of rooftop solar. This is because NEM enables surplus electricity produced by local rooftop solar to the grid and gets the homeowner production credits. NEM also enables multifamily households who are not able to install rooftop solar to join shared solar. Furthermore, California legislated NEM paired with a storage program to increase adoption such that facilities paired with storage can be exempt from interconnection application fees and distribution upgrade costs. California attracts customers to join NEM paired with a storage program by introducing Self-Generation Incentive Program (SGIP) where customers are eligible to receive incentives depending on project size. NEM paired with storage benefits customers more as storage gives the flexibility of electricity consumption while there are still barriers such as higher upfront cost and uncertain policy changes.

-   Current status of key dimensions
As the adoption of clean energy technologies increases with the falling cost of technology installations, government incentives such as tax credits, production credits, etc. decrease. Urban development with multifamily housings and more renters makes rooftop solar installations hard. States are working on several shared solar programs in this regard.

-   Past trends of key dimensions
Rebates, tax credits, production performance credits, property tax exemptions, and sales tax exemptions are forms of regressive taxation benefiting wealthier households by imposing taxes on the residents including low-income households, which led to energy inequity (Poruschi and Ambrey, 2019).

-   Future trends
Governments are working on energy equity with several supporting programs for low-income households.

Interdependencies
Urban planning and policies determine the built environment such as residential zones (commercial, single-family housing, etc.). Energy policy also affects the configuration of energy infrastructures and the adoption of clean energy technologies.

Future uncertainty
There are other driving forces as previous studies have found several drivers to the diffusion of clean energy technologies in addition to demographic characteristics, built environments, and policy variables, such as peer effects, indirect costs, and climate (Bollinger and Gillingham, 2012) - imitation, herd behavior, and social interaction (Scott and Carrington, 2011); transaction cost such as time spent on negotiating (Seel et al. 2014), and solar irradiation (Schaffer and Brun, 2015).






References


1.	Bollinger, B., and Gillingham, K. (2012). “Peer Effects in the Diffusion of Solar Photovoltaic Panels.” Marketing Science, INFORMS, 31(6), 900–912.
2.	Davidson, C., Drury, E., Lopez, A., Elmore, R., and Margolis, R. (2014). “Modeling photovoltaic diffusion: an analysis of geospatial datasets.” Environmental Research Letters, 9(7), 074009.
3.	Graziano, M., and Gillingham, K. (2015). “Spatial patterns of solar photovoltaic system adoption: The influence of neighbors and the built environment.” Journal of Economic Geography, Oxford Academic, 15(4), 815–839.
4.	Hofierka, J., Kaňuk, J., and Gallay, M. (2014). “The Spatial Distribution of Photovoltaic Power Plants in Relation to Solar Resource Potential: The Case of the Czech Republic and Slovakia.” Moravian Geographical Reports, Sciendo, 22(2), 26–33.
5.	Keirstead, J. (2007). “Behavioural responses to photovoltaic systems in the UK domestic sector.” Energy Policy, 35(8), 4128–4141.
6.	Müller, S., and Rode, J. (2013). “The adoption of photovoltaic systems in Wiesbaden, Germany.” Economics of Innovation and New Technology, Routledge, 22(5), 519–535.
7.	Poruschi, L., and Ambrey, C. L. (2019). “Energy justice, the built environment, and solar photovoltaic (PV) energy transitions in urban Australia: A dynamic panel data analysis.” Energy Research & Social Science, 48, 22–32.
8.	Schaffer, A. J., and Brun, S. (2015). “Beyond the sun—Socioeconomic drivers of the adoption of small-scale photovoltaic installations in Germany.” Energy Research & Social Science, 10, 220–227.
9.	Scott, J., and Carrington, P. J. (2011). The SAGE Handbook of Social Network Analysis. SAGE Publications, London, UNITED KINGDOM.
10.	Seel, J., Barbose, G. L., and Wiser, R. H. (2014). “An analysis of residential PV system price differences between the United States and Germany.” Energy Policy, 69, 216–226.
11.	Sunter, D. A., Castellanos, S., and Kammen, D. M. (2019). “Disparities in rooftop photovoltaics deployment in the United States by race and ethnicity.” Nature Sustainability, Nature Publishing Group, 2(1), 71–76.



## Youtube crawling using Tweepy

Using Tweepy, the automative web crawler stores core information about the keywords - **energy justice** - to csv format.

***Code***

```
# A demo of collecting data from YouTube.

from selenium import webdriver
from bs4 import BeautifulSoup
import time, datetime, csv


# The url where the data will be collected from.
url = "https://www.youtube.com/results?search_query=energy+justice"

# A bot can automate the collecting data process. A bot will iminate how an user browse a web page, and then acqure those
# useful information. Therefore, a bot needs to control a browser. Google has released the driver to enable software
# engineerer to control a chrame application. Please download the chromedrive from https://chromedriver.chromium.org/downloads.
# Please make sure you pick the right version (the version of the latest chrome browser is 89.X). the "executable_path"
# indicates the location where you store the driver.
bot = webdriver.Chrome(executable_path="chromedriver/chromedriver")

# Input the targeting url to the bot, and the bot will load data from the url.
bot.get(url)

# Create a csv file to store the structured data after processing.
csvfile = open("assets/utube.csv", "w", newline='', encoding="utf-8") # mode a, r, w   absoluate path, relative patgh

# All the fields of each data entry that I want to collect.
fieldnames = ['username', 'user_url', 'title', 'view_num', 'created_at', 'video_url', 'shortdesc', 'collected_at', 'img_url']

# Create a writer to write the structured data to the csv file.
writer = csv.DictWriter(csvfile, fieldnames=fieldnames)

# Write the header to the csv file
writer.writeheader()

# An array to store all the video urls.
video_urls = []


# variable i indicates the number of times that scrolls down a web page. In practice, you might want to develop different
# interaction approach to load and view the web pages.

for i in range(4):

    # Create a document object model (DOM) from the raw source of the crawled web page.
    # Since you are processing a html page, 'html.parser' is chosen.
    soup = BeautifulSoup(bot.page_source, 'html.parser')

    # Capture all the video items using find_all or findAll method.
    # To view the information of the html elements you want to collect, you need to inspect the raw source using Chrome Inspector.
    # To test whether you find the right html elements, you can use the pycharm debugger to examine the returned data.
    videos = soup.find_all('ytd-video-renderer', class_="style-scope ytd-item-section-renderer")[-20:] # 20 indicates only process the newly-acquired 20 entries.

    # iterate and process each video entry.
    for video in videos:

        # I prefer use the "try-except" statement to enable the program run without pausing due to unexecpted errors.
        try:
            video_url = video.find("a", class_="yt-simple-endpoint inline-block style-scope ytd-thumbnail").attrs["href"]
            img_url = video.find("img", class_="style-scope yt-img-shadow").attrs["src"]
            user_url = video.find("a", class_="yt-simple-endpoint style-scope yt-formatted-string").attrs["href"]
            username = video.find("a", class_="yt-simple-endpoint style-scope yt-formatted-string").text
            title = video.find("yt-formatted-string", class_="style-scope ytd-video-renderer").text
            view_num = video.find_all("span", class_="style-scope ytd-video-meta-block")[0].text.replace(" views", "")
            created_at = video.find_all("span", class_="style-scope ytd-video-meta-block")[1].text.replace(" ago", "")
            shortdesc = video.find("yt-formatted-string", id="description-text").text
            collected_at = datetime.datetime.now()

            # create a row in the dict format.
            row = {'video_url': video_url,
                    'user_url': user_url,
                    'username': username,
                    'title': title,
                    'view_num': view_num,
                    'created_at': created_at,
                    'shortdesc': shortdesc,
                    'img_url': img_url,
                    'collected_at': collected_at}

            # if a video has been added to the csvfile, this video would not be inserted to the csv file,
            # otherwise, this video will be inserted.
            if video_url in video_urls:
                print("this video has already been added.")
            else:
                print(row)
                writer.writerow(row)

                # add the video_url to the video_urls array.
                video_urls.append(video_url)
        except:
            pass

    # it is very important to enable the bot take some rest, and then resume to work.
    time.sleep(5)

    # Let the bot scrolls down to the bottom of the content element, most of the time the bot needs to scroll down to the bottom of the page.
    # like this statement: bot.execute_script("window.scrollTo(0, document.body.scrollHeight);")
    bot.execute_script('window.scrollTo(0,  document.getElementById("content").scrollHeight);')

# close the csvfile object and the bot object.
csvfile.close()
bot.close()

# notify the completion of the program in the console.
print("finished")
```



## [The result CSV file](assets/utube.csv)

The output csv file from the code described above can be accessed by clicking the title in blue.
